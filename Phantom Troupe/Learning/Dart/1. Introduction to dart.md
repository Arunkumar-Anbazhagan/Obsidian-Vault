# Comprehensive Deep-Dive Notes: Dart Programming Language

## 1. Introduction to Dart & Ecosystem
### What is Dart?
* **Definition:** Dart is a client-optimized language for fast apps on any platform. It forms the foundation of the Flutter framework.
* **Key Characteristics (The "Dart Arrow" Analogy):**
    * **Precise:** Optimized for UI creation.
    * **Fast:** Compiles to native code (ARM/x64) and optimized JavaScript.
    * **Tough (Stable):** Type-safe and sound null safety for maintainability.
    * **Hot Reload:** Supports stateful hot reload for rapid iteration. [00:03:06](https://youtu.be/F3JuuYuOUK4?t=186)

### Compilation Modes & Platforms
Dart uses different compilers depending on the development phase:
* **JIT (Just-In-Time):**
    * Used during **Development**.
    * Compiles code on the fly (just when needed).
    * Enables **Hot Reload** and rich debugging.
    * Runs on the Dart VM. [00:15:38](https://youtu.be/F3JuuYuOUK4?t=938)
* **AOT (Ahead-Of-Time):**
    * Used for **Production**.
    * Compiles entire source code into native machine code (binary).
    * Optimized for fast startup and consistent performance.
    * Removes unused code (tree shaking). [00:17:49](https://youtu.be/F3JuuYuOUK4?t=1069)

### Dart SDK & CLI
* **SDK Components:** Includes the Dart VM, libraries (core, math, etc.), and tools (compiler, analyzer, debugger).
* **Project Structure (Packages):**
    * `lib/`: Contains the public code/libraries.
    * `bin/`: Contains the entry point (main function) for command-line apps.
    * `test/`: Contains unit/widget tests.
    * `pubspec.yaml`: Metadata, dependencies, and environment constraints. [00:43:00](https://youtu.be/F3JuuYuOUK4?t=2580)
* **Key CLI Commands:**
    * `dart create`: Create a new project.
    * `dart run`: Run a Dart file (uses JIT).
    * `dart compile exe`: Compile to native executable (uses AOT).
    * `dart pub get`: Fetch dependencies listed in `pubspec.yaml`. [00:29:40](https://youtu.be/F3JuuYuOUK4?t=1780)

---

## 2. Variables & Type System
Dart is a strongly typed language with type inference.

### Variable Declaration Keywords
* **`var`:**
    * Infers type at **compile-time**.
    * Once assigned, the type is fixed (e.g., `var x = 5` makes `x` an `int` forever). [00:09:38](https://youtu.be/F3JuuYuOUK4?t=578)
* **`dynamic`:**
    * Type checking is disabled static analysis; type is determined at **runtime**.
    * Can change types (e.g., assign `int`, then `String`).
    * **Risk:** Can lead to runtime errors if methods are called that don't exist on the current type. [00:10:26](https://youtu.be/F3JuuYuOUK4?t=626)
* **`final`:**
    * Single assignment. Value must be known at **runtime** (or compile time).
    * Variables cannot be reassigned, but their internal state (if mutable, like a List) can change unless the value itself is const. [02:35:34](https://youtu.be/F3JuuYuOUK4?t=9334)
* **`const`:**
    * Compile-time constant. Value must be known at **compile-time**.
    * Deeply immutable (transitive immutability).
    * `const` variables are implicitly `final`. [02:34:46](https://youtu.be/F3JuuYuOUK4?t=9286)

### Built-in Types
* **Numbers (`num`):** Parent type for `int` and `double`.
    * `int`: Integers (64-bit).
    * `double`: 64-bit floating-point numbers (IEEE 754).
    * Methods: `clamp`, `ceil`, `floor`, `round`. [02:45:24](https://youtu.be/F3JuuYuOUK4?t=9924)
* **Strings (`String`):**
    * Sequence of UTF-16 code units.
    * **Interpolation:** `'$variable'` or `'${expression}'`.
    * **Multiline:** Use triple quotes `''' ... '''`.
    * **Raw Strings:** Prefix with `r` (e.g., `r'No \n escape'`). [02:52:07](https://youtu.be/F3JuuYuOUK4?t=10327)
* **Booleans (`bool`):** strictly `true` or `false`.
* **Lists (`List`):**
    * Ordered collection. Zero-based indexing.
    * **Spread Operator (`...`):** Inserts all elements of one list into another. `[...list1, ...list2]`.
    * **Collection if/for:** `[if (condition) element]` or `[for (var i in items) i]`. [03:04:00](https://youtu.be/F3JuuYuOUK4?t=11040)
* **Sets (`Set`):** Unordered collection of unique items. Uses `{}` literals. [03:11:04](https://youtu.be/F3JuuYuOUK4?t=11464)
* **Maps (`Map`):** Key-value pairs. `{key: value}` literals. Keys must be unique. [03:14:52](https://youtu.be/F3JuuYuOUK4?t=11692)
* **Runes:** Exposes the Unicode code points of a string (handling characters like Emojis that may exceed 16 bits). [03:17:42](https://youtu.be/F3JuuYuOUK4?t=11862)

---

## 3. Sound Null Safety
Dart's type system is sound, meaning variables are non-nullable by default.

* **Non-nullable types:** `String s = "hello";` (Cannot be null).
* **Nullable types:** `String? s = null;` (Marked with `?`).
* **Assertion Operator (`!`):** Casts a nullable type to a non-nullable type, throwing a runtime exception if null. `s!.length`. [02:04:14](https://youtu.be/F3JuuYuOUK4?t=7454)
* **Late Variables (`late`):**
    * Lazy initialization: Variable is initialized only when first accessed.
    * Promises the analyzer that a non-nullable variable will be initialized before use. [02:06:21](https://youtu.be/F3JuuYuOUK4?t=7581)
* **Flow Analysis:** The analyzer is smart enough to promote a nullable type to non-nullable if a check (e.g., `if (x != null)`) proves it is safe within a specific scope. [02:00:01](https://youtu.be/F3JuuYuOUK4?t=7201)

---

## 4. Functions
Functions are objects (first-class citizens) and can be passed as arguments or assigned to variables.

### Parameters
* **Positional Required:** `void func(int a, int b)` - Order matters.
* **Positional Optional:** `void func([int? a])` - Wrapped in `[]`.
* **Named Optional:** `void func({int? a})` - Wrapped in `{}`. Called via `func(a: 5)`.
* **Named Required:** `void func({required int a})` - Must be provided at call site. [03:33:03](https://youtu.be/F3JuuYuOUK4?t=12783)

### Syntax Sugar
* **Arrow Syntax:** `=> expression` is shorthand for `{ return expression; }`. [03:25:45](https://youtu.be/F3JuuYuOUK4?t=12345)
* **Anonymous Functions (Lambdas):** `(args) { body }`. Used often in `.map` or `.forEach`. [03:26:47](https://youtu.be/F3JuuYuOUK4?t=12407)

---

## 5. Control Flow & Operators
* **Cascades (`..`):** Allows performing a sequence of operations on the same object.
    * `var l = List()..add(1)..sort();` returns the list, not the result of `sort()`. [03:05:36](https://youtu.be/F3JuuYuOUK4?t=11136)
* **Null-aware Operators:**
    * `?.` (Conditional access): `obj?.method()` calls method only if obj is not null.
    * `??` (If null): `a ?? b` returns `a` if not null, otherwise `b`.
    * `??=` (Assign if null): `a ??= 5` assigns 5 to `a` only if `a` is currently null. [03:54:22](https://youtu.be/F3JuuYuOUK4?t=14062)
* **Loops:** Standard `for`, `while`, `do-while`, and `for-in` (`for (var item in list)`).
* **Switch/Case:** Supports integers, strings, and compile-time constants (like Enums).
* **Exceptions:**
    * `throw Exception('Error')`.
    * `try { ... } on ExceptionType { ... } catch (e, stackTrace) { ... } finally { ... }`. [04:16:56](https://youtu.be/F3JuuYuOUK4?t=15416)

---

## 6. Classes & Object-Oriented Programming (OOP)
Dart supports single inheritance and mixin-based inheritance.

### Constructors
* **Default:** `ClassName(this.field);` (Syntactic sugar to assign fields).
* **Named Constructors:** `ClassName.fromJson(Map data) { ... }`. [04:45:56](https://youtu.be/F3JuuYuOUK4?t=17156)
* **Initializer List:** `ClassName() : x = 0, y = 0 { ... }`. Executes *before* the constructor body. Essential for initializing `final` fields. [04:40:44](https://youtu.be/F3JuuYuOUK4?t=16844)
* **Redirecting Constructors:** `ClassName.zero() : this(0, 0);` calls the main constructor.
* **Const Constructors:** `const ClassName(...)`. Creates compile-time constant instances (canonicalized). All fields must be final. [04:49:35](https://youtu.be/F3JuuYuOUK4?t=17375)
* **Factory Constructors:** `factory ClassName()`. Can return an existing instance (singleton) or a subclass. Does not access `this`. [04:52:00](https://youtu.be/F3JuuYuOUK4?t=17520)

### Inheritance & Abstraction
* **`extends`:** Single inheritance. Inherits implementation. Access superclass via `super`. [05:08:27](https://youtu.be/F3JuuYuOUK4?t=18507)
* **`implements`:** implicit interfaces. Every class defines an interface. `implements` forces the class to override *all* members of the interface. Supports multiple implementations. [05:11:35](https://youtu.be/F3JuuYuOUK4?t=18695)
* **`with` (Mixins):** Adds capabilities to a class. Reuse code across multiple class hierarchies.
    * Declared using `mixin` keyword.
    * Cannot have constructors.
    * Use `on` to restrict which classes can use the mixin. [05:19:14](https://youtu.be/F3JuuYuOUK4?t=19154)

### Extension Methods
Add functionality to existing libraries (even those you don't own, like `String` or `int`) without modifying them.
* Syntax: `extension MyExtension on String { ... }`. [05:29:40](https://youtu.be/F3JuuYuOUK4?t=19780)

---

## 7. Generics
Allows types to be parameters, ensuring type safety and reducing code duplication.
* **Usage:** `List<String>`, `Map<int, String>`.
* **Generic Classes:** `class Stack<T> { ... }`.
* **Generic Methods:** `T first<T>(List<T> ts) { ... }`.
* **Type Constraints:** `class MyClass<T extends num>` ensures T is a number. [05:46:38](https://youtu.be/F3JuuYuOUK4?t=20798)

---

## 8. Libraries & Visibility
* **Visibility:** Dart has no `public`, `protected`, or `private` keywords.
    * **Private:** Identifiers starting with `_` (underscore) are private to the **library** (file), not just the class. [06:02:38](https://youtu.be/F3JuuYuOUK4?t=21758)
* **`part` / `part of`:** Splits a single library into multiple files. Allows access to private members across these files. [06:06:31](https://youtu.be/F3JuuYuOUK4?t=21991)
* **`export`:** Allows a library to re-export other libraries, creating a single entry point (barrel file). [06:11:54](https://youtu.be/F3JuuYuOUK4?t=22314)

---

## 9. Asynchrony: Isolates, Futures, and Streams
Dart is single-threaded. It uses an **Event Loop** to manage operations.

### Isolates
* **Concept:** Distinct memory and execution thread.
* **Main Isolate:** The default thread where Dart code runs.
* **Concurrency:** To run heavy computations without blocking the UI, spawn a new Isolate. Isolates do not share memory; they communicate via ports/messages. [06:50:35](https://youtu.be/F3JuuYuOUK4?t=24635)

### The Event Loop & Queues
1.  **Microtask Queue:** High priority. Processed before the Event Queue. (e.g., `Future.microtask`, `Future.value`).
2.  **Event Queue:** Standard priority. Includes I/O, timers, user interactions, and standard Futures. [07:00:35](https://youtu.be/F3JuuYuOUK4?t=25235)

### Futures (Single Async Value)
* **States:** Uncompleted -> Completed (with value or error).
* **`async` / `await`:**
    * Mark function `async` to allow `await`.
    * `await` pauses execution of the current function until the Future completes.
    * Makes async code read like sync code. [07:48:30](https://youtu.be/F3JuuYuOUK4?t=28110)
* **Constructors:**
    * `Future.delayed()`: Enqueues event after duration.
    * `Future.microtask()`: Enqueues in Microtask queue (runs ASAP).

### Streams (Multiple Async Values)
* **Concept:** A sequence of asynchronous events (like a pipe of water).
* **StreamController:** Manages a stream. Use `.sink.add()` to put data in.
* **Listening:** `stream.listen((data) { ... })`.
* **Generators:**
    * **Synchronous (`sync*`):** Returns `Iterable`. Uses `yield`. [07:12:29](https://youtu.be/F3JuuYuOUK4?t=25949)
    * **Asynchronous (`async*`):** Returns `Stream`. Uses `yield`. Can use `await` inside. [07:59:47](https://youtu.be/F3JuuYuOUK4?t=28787)